<?php

namespace Database\Factories\Users;

use App\Models\Users\Employee;
use Illuminate\Database\Eloquent\Factories\Factory;

class EmployeeFactory extends Factory
{
    protected $model = Employee::class;

    public function definition(): array
    {
        $experience = $this->faker->numberBetween(0, 25);

        // рейтинг зависит от стажа
        $rating = $experience > 10
            ? $this->faker->numberBetween(3, 5)   // минимум 3, если стаж > 10
            : $this->faker->randomFloat(2, 0, 5);

        return [
            'user_id' => null, // задаётся в сидере
            'position' => $this->faker->randomElement([
                'Автомеханик',
                'Автоэлектрик',
                'Диагност',
                'Мастер по кузовному ремонту',
                'Маляр по автомобилям',
                'Шиномонтажник',
                'Приёмщик заказов',
                'Менеджер автосервиса',
                'Администратор зала',
                'Мастер-приёмщик',
            ]),
            'work_shift' => $this->faker->randomElement([
                'Утренняя',
                'Дневная',
                'Ночная',
                'Гибкий график',
            ]),
            'salary' => $this->faker->numberBetween(30000, 120000),
            'hire_date' => $this->faker->dateTimeBetween('-15 years', 'now'),
            'is_active' => $this->faker->randomElement(['Свободен', 'Занят']),
            'skills' => $this->faker->randomElement([
                'Диагностика двигателя, замена масла, ремонт подвески',
                'Ремонт электропроводки, настройка электроники, диагностика аккумулятора',
                'Кузовные работы, рихтовка, сварка, покраска',
                'Шиномонтаж, балансировка колёс, сезонная замена резины',
                'Компьютерная диагностика, чтение ошибок, настройка ПО автомобиля',
                'Работа с клиентами, оформление заказов, ведение документации',
            ]),
            'rating' => $rating,
            'experience_years' => $experience,
            'supervisor_id' => null,
            'notes' => $this->faker->randomElement([
                'Нет заметок', 'Требуется перепроверка работы',
                'Опоздал на смену', 'Отличное выполнение задач',
                'Нужно пройти дополнительное обучение', 'Замечаний нет',
                'Рекомендован к повышению', 'Клиент остался доволен обслуживанием',
                'Ошибка при диагностике, требуется повтор', 'Проявил инициативу в сложной ситуации',
                'Необходимо проверить качество ремонта', 'Хорошо справляется с нагрузкой',
                'Нарушил технику безопасности', 'Работает быстро, но допускает мелкие ошибки',
                'Предложил улучшение рабочего процесса', 'Отправлен в командировку',
                'Не вышел на смену без предупреждения', 'Получил благодарность от клиента',
                'Сдал отчет с опозданием', 'Справился с внеплановым ремонтом',
            ]),
            'note_added_at' => $this->faker->dateTimeBetween('-2 years', 'now'),
        ];
    }
}
